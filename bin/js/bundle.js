var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var MainSceneControl_1 = require("./script/MainSceneControl");
var Bucket_1 = require("./script/Bucket");
var Candy_1 = require("./script/Candy");
/*
* 游戏初始化配置;
*/
var GameConfig = /** @class */ (function () {
    function GameConfig() {
    }
    GameConfig.init = function () {
        var reg = Laya.ClassUtils.regClass;
        reg("script/MainSceneControl.ts", MainSceneControl_1.default);
        reg("script/Bucket.ts", Bucket_1.default);
        reg("script/Candy.ts", Candy_1.default);
    };
    GameConfig.width = 750;
    GameConfig.height = 1334;
    GameConfig.scaleMode = "fixedwidth";
    GameConfig.screenMode = "vertical";
    GameConfig.alignV = "top";
    GameConfig.alignH = "center";
    GameConfig.startScene = "scene/MainScene.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = true;
    GameConfig.physicsDebug = true;
    GameConfig.exportSceneToJson = true;
    return GameConfig;
}());
exports.default = GameConfig;
GameConfig.init();
},{"./script/Bucket":3,"./script/Candy":4,"./script/MainSceneControl":5}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var GameConfig_1 = require("./GameConfig");
var Main = /** @class */ (function () {
    function Main() {
        //根据IDE设置初始化引擎		
        if (window["Laya3D"])
            Laya3D.init(GameConfig_1.default.width, GameConfig_1.default.height);
        else
            Laya.init(GameConfig_1.default.width, GameConfig_1.default.height, Laya["WebGL"]);
        Laya["Physics"] && Laya["Physics"].enable();
        Laya["DebugPanel"] && Laya["DebugPanel"].enable();
        Laya.stage.scaleMode = GameConfig_1.default.scaleMode;
        Laya.stage.screenMode = GameConfig_1.default.screenMode;
        //兼容微信不支持加载scene后缀场景
        Laya.URL.exportSceneToJson = GameConfig_1.default.exportSceneToJson;
        //打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
        if (GameConfig_1.default.debug || Laya.Utils.getQueryString("debug") == "true")
            Laya.enableDebugPanel();
        if (GameConfig_1.default.physicsDebug && Laya["PhysicsDebugDraw"])
            Laya["PhysicsDebugDraw"].enable();
        if (GameConfig_1.default.stat)
            Laya.Stat.show();
        Laya.alertGlobalError = true;
        //激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
        Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    }
    Main.prototype.onVersionLoaded = function () {
        //激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
        Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    };
    Main.prototype.onConfigLoaded = function () {
        //加载IDE指定的场景
        GameConfig_1.default.startScene && Laya.Scene.open(GameConfig_1.default.startScene);
    };
    return Main;
}());
//激活启动类
new Main();
},{"./GameConfig":1}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var MainSceneControl_1 = require("./MainSceneControl");
var Candy_1 = require("./Candy");
var Bucket = /** @class */ (function (_super) {
    __extends(Bucket, _super);
    function Bucket() {
        return _super.call(this) || this;
    }
    Bucket.prototype.onEnable = function () {
        this.initProperty();
    };
    /**初始化*/
    Bucket.prototype.initProperty = function () {
        this.self = this.owner;
        this.selfScene = this.self.scene;
        this.nameAndIndex = this.selfScene.getComponent(MainSceneControl_1.default).nameAndIndex;
        this.candyParent = this.selfScene.getComponent(MainSceneControl_1.default).candyParent;
        this.bucketClink();
    };
    /**桶点击事件*/
    Bucket.prototype.bucketClink = function () {
        this.self.on(Laya.Event.MOUSE_DOWN, this, this.down);
        this.self.on(Laya.Event.MOUSE_MOVE, this, this.move);
        this.self.on(Laya.Event.MOUSE_UP, this, this.up);
        this.self.on(Laya.Event.MOUSE_OUT, this, this.out);
    };
    /**按下,给予目标位置，糖果走向目标位置;
     * 并且分数增加*/
    Bucket.prototype.down = function (event) {
        this.self.scale(0.9, 0.9);
        // 如果感应区有糖果,找到第一个进入感应区的糖果的唯一名称
        if (this.nameAndIndex[0]) {
            var candyName = this.nameAndIndex[this.nameAndIndex.length - 1];
            var candy = this.candyParent.getChildByName(candyName);
            var CandyScript = candy.getComponent(Candy_1.default);
            // 给予目标地点,非空说明点击过了
            if (CandyScript.targetBucket === null) {
                CandyScript.targetBucket = this.self;
            }
        }
        else {
            console.log('糖果不在感应区，或者点错了');
        }
    };
    /**移动*/
    Bucket.prototype.move = function (event) {
    };
    /**抬起*/
    Bucket.prototype.up = function () {
        this.self.scale(1, 1);
    };
    /**出屏幕*/
    Bucket.prototype.out = function () {
        this.self.scale(1, 1);
    };
    Bucket.prototype.onDisable = function () {
    };
    return Bucket;
}(Laya.Script));
exports.default = Bucket;
},{"./Candy":4,"./MainSceneControl":5}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var MainSceneControl_1 = require("./MainSceneControl");
var Candy = /** @class */ (function (_super) {
    __extends(Candy, _super);
    function Candy() {
        return _super.call(this) || this;
    }
    Candy.prototype.onEnable = function () {
        this.initProperty();
    };
    /**初始化*/
    Candy.prototype.initProperty = function () {
        this.self = this.owner;
        this.selfScene = this.self.scene;
        var mainSceneControl = this.selfScene.getComponent(MainSceneControl_1.default);
        this.nameAndIndex = mainSceneControl.nameAndIndex;
        this.scoreLabel = mainSceneControl.scoreLabel;
        this.targetBucket = null;
        this.rig = this.self.getComponent(Laya.RigidBody);
        this.rig.linearVelocity = { x: 0, y: 0.1 }; //此处y值必须不等于0才能正常检测碰撞，并不知道为何
        this.speed = 6;
        this.selectTarget = true;
    };
    Candy.prototype.onTriggerEnter = function (other, self, contact) {
        var otherName = other.owner.name;
        // 初次碰撞把名称和唯一的索引值放进数组
        if (otherName === 'induction') {
            var name_1 = self.owner.name;
            this.nameAndIndex.push(name_1);
        }
        else if (otherName === 'redBucket' || otherName === 'yellowBucket') {
            this.self.removeSelf();
            var color = self.owner.name.substring(0, 11);
            // 名称配对
            var pairName = color + otherName;
            var matching_01 = 'yellowCandy' + 'yellowBucket';
            var matching_02 = 'redCandy___' + 'redBucket';
            if (pairName === matching_01 || pairName === matching_02) {
                this.scoreLabel.text = (Number(this.scoreLabel.text) + 100).toString();
            }
            else {
            }
        }
    };
    Candy.prototype.onTriggerStay = function (other, self, contact) {
    };
    Candy.prototype.onTriggerExit = function (other, self, contact) {
        var otherName = other.owner.name;
        // 碰撞结束删掉
        if (otherName === 'induction') {
            for (var i = 0; i < this.nameAndIndex.length; i++) {
                if (this.nameAndIndex[i] === self.owner.name) {
                    this.nameAndIndex.splice(i, 1);
                }
            }
        }
    };
    Candy.prototype.onUpdate = function () {
        // 超出范围消失
        if (this.self.y > Laya.stage.height + 100 || this.self.x > 750 + this.self.width + 50 || this.self.x < -this.self.width) {
            this.self.removeSelf();
        }
        // 判断去向
        if (this.targetBucket === null) {
            this.self.y += this.speed;
        }
        else {
            // x,y分别相减是两点连线向量
            var point = new Laya.Point(this.targetBucket.x - this.self.x, this.targetBucket.y - this.self.y);
            // 归一化，向量长度为1。
            point.normalize();
            //向量相加
            this.self.x += point.x * this.speed * 15 / 8;
            this.self.y += point.y * this.speed * 15 / 8;
        }
    };
    Candy.prototype.onDisable = function () {
        Laya.Pool.recover("candy", this.self);
    };
    return Candy;
}(Laya.Script));
exports.default = Candy;
},{"./MainSceneControl":5}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var MainSceneControl = /** @class */ (function (_super) {
    __extends(MainSceneControl, _super);
    function MainSceneControl() {
        return _super.call(this) || this;
    }
    MainSceneControl.prototype.onEnable = function () {
        this.initSecne();
    };
    /**场景初始化*/
    MainSceneControl.prototype.initSecne = function () {
        this.candy_interval = 500;
        this.creatTime = Date.now();
        this.creatOnOff = true;
        Laya.MouseManager.multiTouchEnabled = true;
        this.nameAndIndex = [];
        this.candyCount = 0;
        this.scoreLabel.text = '0';
        this.bucketInit();
    };
    /**糖果桶初始化,他们位置不一样，并且成对出现*/
    MainSceneControl.prototype.bucketInit = function () {
        // 第一个桶的位置
        var x_01 = Laya.stage.width * 1 / 4;
        var y_01 = 800;
        var imageUrl_01 = 'candy/红色桶.png';
        // 第二个桶的位置
        var x_02 = Laya.stage.width * 3 / 4;
        var y_02 = 800;
        var imageUrl_02 = 'candy/黄色桶.png';
        for (var i = 0; i < 2; i++) {
            var bucket = Laya.Pool.getItemByCreateFun('bucket', this.bucket.create, this.bucket);
            this.bucketParent.addChild(bucket);
            switch (i) {
                case 0:
                    bucket.name = 'redBucket';
                    bucket.pos(x_01 - bucket.width / 2, y_01);
                    bucket.getChildByName('pic').loadImage(imageUrl_01);
                    break;
                case 1:
                    bucket.name = 'yellowBucket';
                    bucket.pos(x_02 - bucket.width / 2, y_02);
                    bucket.getChildByName('pic').loadImage(imageUrl_02);
                    break;
            }
        }
    };
    /**产生糖果*/
    MainSceneControl.prototype.productionCandy = function () {
        var candy = Laya.Pool.getItemByCreateFun('candy', this.candy.create, this.candy);
        this.candyCount++;
        // 随机创建一种颜色糖果
        // 糖果的名称结构是11位字符串加上索引值，这样使他们的名称唯一
        var randomNum = Math.floor(Math.random() * 2);
        var url_01 = 'candy/黄色糖果.png';
        var url_02 = 'candy/红色糖果.png';
        switch (randomNum) {
            case 0:
                candy.name = 'yellowCandy' + this.candyCount;
                candy.getChildByName('pic').loadImage(url_01);
                break;
            case 1:
                candy.name = 'redCandy___' + this.candyCount;
                candy.getChildByName('pic').loadImage(url_02);
                break;
            default:
                break;
        }
        candy.pos(Laya.stage.width / 2 - candy.width / 2, -100);
        this.candyParent.addChild(candy);
        candy.rotation = 0;
    };
    MainSceneControl.prototype.onUpdate = function () {
        if (this.creatOnOff) {
            var nowTime = Date.now();
            if (nowTime - this.creatTime > this.candy_interval) {
                this.creatTime = nowTime;
                this.productionCandy();
            }
        }
    };
    MainSceneControl.prototype.onDisable = function () {
    };
    return MainSceneControl;
}(Laya.Script));
exports.default = MainSceneControl;
},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkU6L+i9r+S7tuWuieijhS9MQVlBL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLnRzIiwic3JjL01haW4udHMiLCJzcmMvc2NyaXB0L0J1Y2tldC50cyIsInNyYy9zY3JpcHQvQ2FuZHkudHMiLCJzcmMvc2NyaXB0L01haW5TY2VuZUNvbnRyb2wudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDVkEsZ0dBQWdHO0FBQ2hHLDhEQUF3RDtBQUN4RCwwQ0FBb0M7QUFDcEMsd0NBQWtDO0FBQ2xDOztFQUVFO0FBQ0Y7SUFhSTtJQUFjLENBQUM7SUFDUixlQUFJLEdBQVg7UUFDSSxJQUFJLEdBQUcsR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUM3QyxHQUFHLENBQUMsNEJBQTRCLEVBQUMsMEJBQWdCLENBQUMsQ0FBQztRQUNuRCxHQUFHLENBQUMsa0JBQWtCLEVBQUMsZ0JBQU0sQ0FBQyxDQUFDO1FBQy9CLEdBQUcsQ0FBQyxpQkFBaUIsRUFBQyxlQUFLLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBbEJNLGdCQUFLLEdBQVEsR0FBRyxDQUFDO0lBQ2pCLGlCQUFNLEdBQVEsSUFBSSxDQUFDO0lBQ25CLG9CQUFTLEdBQVEsWUFBWSxDQUFDO0lBQzlCLHFCQUFVLEdBQVEsVUFBVSxDQUFDO0lBQzdCLGlCQUFNLEdBQVEsS0FBSyxDQUFDO0lBQ3BCLGlCQUFNLEdBQVEsUUFBUSxDQUFDO0lBQ3ZCLHFCQUFVLEdBQUssdUJBQXVCLENBQUM7SUFDdkMsb0JBQVMsR0FBUSxFQUFFLENBQUM7SUFDcEIsZ0JBQUssR0FBUyxLQUFLLENBQUM7SUFDcEIsZUFBSSxHQUFTLElBQUksQ0FBQztJQUNsQix1QkFBWSxHQUFTLElBQUksQ0FBQztJQUMxQiw0QkFBaUIsR0FBUyxJ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QUcsYUFBYSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7Z0JBQzVDLEtBQUssQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFpQixDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDL0QsTUFBTTtZQUNWLEtBQUssQ0FBQztnQkFDRixLQUFLLENBQUMsSUFBSSxHQUFHLGFBQWEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO2dCQUM1QyxLQUFLLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBaUIsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQy9ELE1BQU07WUFDVjtnQkFDSSxNQUFNO1NBQ2I7UUFDRCxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2pDLEtBQUssQ0FBQyxRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxtQ0FBUSxHQUFSO1FBQ0ksSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ2pCLElBQUksT0FBTyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN6QixJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxjQUFjLEVBQUU7Z0JBQ2hELElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDO2dCQUN6QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7YUFDMUI7U0FDSjtJQUNMLENBQUM7SUFFRCxvQ0FBUyxHQUFUO0lBRUEsQ0FBQztJQUNMLHVCQUFDO0FBQUQsQ0FySEEsQUFxSEMsQ0FySDZDLElBQUksQ0FBQyxNQUFNLEdBcUh4RCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IE1haW5TY2VuZUNvbnRyb2wgZnJvbSBcIi4vc2NyaXB0L01haW5TY2VuZUNvbnRyb2xcIlxuaW1wb3J0IEJ1Y2tldCBmcm9tIFwiLi9zY3JpcHQvQnVja2V0XCJcbmltcG9ydCBDYW5keSBmcm9tIFwiLi9zY3JpcHQvQ2FuZHlcIlxyXG4vKlxyXG4qIOa4uOaIj+WIneWni+WMlumFjee9rjtcclxuKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZUNvbmZpZ3tcclxuICAgIHN0YXRpYyB3aWR0aDpudW1iZXI9NzUwO1xyXG4gICAgc3RhdGljIGhlaWdodDpudW1iZXI9MTMzNDtcclxuICAgIHN0YXRpYyBzY2FsZU1vZGU6c3RyaW5nPVwiZml4ZWR3aWR0aFwiO1xyXG4gICAgc3RhdGljIHNjcmVlbk1vZGU6c3RyaW5nPVwidmVydGljYWxcIjtcclxuICAgIHN0YXRpYyBhbGlnblY6c3RyaW5nPVwidG9wXCI7XHJcbiAgICBzdGF0aWMgYWxpZ25IOnN0cmluZz1cImNlbnRlclwiO1xyXG4gICAgc3RhdGljIHN0YXJ0U2NlbmU6YW55PVwic2NlbmUvTWFpblNjZW5lLnNjZW5lXCI7XHJcbiAgICBzdGF0aWMgc2NlbmVSb290OnN0cmluZz1cIlwiO1xyXG4gICAgc3RhdGljIGRlYnVnOmJvb2xlYW49ZmFsc2U7XHJcbiAgICBzdGF0aWMgc3RhdDpib29sZWFuPXRydWU7XHJcbiAgICBzdGF0aWMgcGh5c2ljc0RlYnVnOmJvb2xlYW49dHJ1ZTtcclxuICAgIHN0YXRpYyBleHBvcnRTY2VuZVRvSnNvbjpib29sZWFuPXRydWU7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe31cclxuICAgIHN0YXRpYyBpbml0KCl7XHJcbiAgICAgICAgdmFyIHJlZzogRnVuY3Rpb24gPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbiAgICAgICAgcmVnKFwic2NyaXB0L01haW5TY2VuZUNvbnRyb2wudHNcIixNYWluU2NlbmVDb250cm9sKTtcbiAgICAgICAgcmVnKFwic2NyaXB0L0J1Y2tldC50c1wiLEJ1Y2tldCk7XG4gICAgICAgIHJlZyhcInNjcmlwdC9DYW5keS50c1wiLENhbmR5KTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLmluaXQoKTsiLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0Ly/lhbzlrrnlvq7kv6HkuI3mlK/mjIHliqDovb1zY2VuZeWQjue8gOWcuuaZr1xyXG5cdFx0TGF5YS5VUkwuZXhwb3J0U2NlbmVUb0pzb24gPSBHYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uO1xyXG5cclxuXHRcdC8v5omT5byA6LCD6K+V6Z2i5p2/77yI6YCa6L+HSURF6K6+572u6LCD6K+V5qih5byP77yM5oiW6ICFdXJs5Zyw5Z2A5aKe5YqgZGVidWc9dHJ1ZeWPguaVsO+8jOWdh+WPr+aJk+W8gOiwg+ivlemdouadv++8iVxyXG5cdFx0aWYgKEdhbWVDb25maWcuZGVidWcgfHwgTGF5YS5VdGlscy5nZXRRdWVyeVN0cmluZyhcImRlYnVnXCIpID09IFwidHJ1ZVwiKSBMYXlhLmVuYWJsZURlYnVnUGFuZWwoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyAmJiBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXSkgTGF5YVtcIlBoeXNpY3NEZWJ1Z0RyYXdcIl0uZW5hYmxlKCk7XHJcblx0XHRpZiAoR2FtZUNvbmZpZy5zdGF0KSBMYXlhLlN0YXQuc2hvdygpO1xyXG5cdFx0TGF5YS5hbGVydEdsb2JhbEVycm9yID0gdHJ1ZTtcclxuXHJcblx0XHQvL+a/gOa0u+i1hOa6kOeJiOacrOaOp+WItu+8jHZlcnNpb24uanNvbueUsUlEReWPkeW4g+WKn+iDveiHquWKqOeUn+aIkO+8jOWmguaenOayoeacieS5n+S4jeW9seWTjeWQjue7rea1geeoi1xyXG5cdFx0TGF5YS5SZXNvdXJjZVZlcnNpb24uZW5hYmxlKFwidmVyc2lvbi5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vblZlcnNpb25Mb2FkZWQpLCBMYXlhLlJlc291cmNlVmVyc2lvbi5GSUxFTkFNRV9WRVJTSU9OKTtcclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpOiB2b2lkIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKTogdm9pZCB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJpbXBvcnQgTWFpblNjZW5lQ29udHJvbCBmcm9tIFwiLi9NYWluU2NlbmVDb250cm9sXCI7XHJcbmltcG9ydCBDYW5keSBmcm9tIFwiLi9DYW5keVwiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCdWNrZXQgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICAvKiroh6rlt7EqL1xyXG4gICAgcHJpdmF0ZSBzZWxmOiBMYXlhLlNwcml0ZTtcclxuICAgIC8qKuaJgOWxnuWcuuaZryovXHJcbiAgICBwcml2YXRlIHNlbGZTY2VuZTogTGF5YS5TY2VuZTtcclxuICAgIC8qKuezluaenOWIsOeisOWIsOaEn+W6lOijhee9ruaXtu+8jOWQjeWtl+ijhei/m+i/meS4quaVsOe7hCovXHJcbiAgICBwcml2YXRlIG5hbWVBbmRJbmRleDogQXJyYXk8c3RyaW5nPjtcclxuICAgIC8qKuezluaenOeItuiKgueCuSovXHJcbiAgICBwcml2YXRlIGNhbmR5UGFyZW50OiBMYXlhLlNwcml0ZTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG5cclxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuaW5pdFByb3BlcnR5KCk7XHJcbiAgICB9XHJcbiAgICAvKirliJ3lp4vljJYqL1xyXG4gICAgaW5pdFByb3BlcnR5KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZiA9IHRoaXMub3duZXIgYXMgTGF5YS5TcHJpdGU7XHJcbiAgICAgICAgdGhpcy5zZWxmU2NlbmUgPSB0aGlzLnNlbGYuc2NlbmUgYXMgTGF5YS5TY2VuZTtcclxuICAgICAgICB0aGlzLm5hbWVBbmRJbmRleCA9IHRoaXMuc2VsZlNjZW5lLmdldENvbXBvbmVudChNYWluU2NlbmVDb250cm9sKS5uYW1lQW5kSW5kZXg7XHJcbiAgICAgICAgdGhpcy5jYW5keVBhcmVudCA9IHRoaXMuc2VsZlNjZW5lLmdldENvbXBvbmVudChNYWluU2NlbmVDb250cm9sKS5jYW5keVBhcmVudDtcclxuICAgICAgICB0aGlzLmJ1Y2tldENsaW5rKCk7XHJcbiAgICB9XHJcbiAgICAvKirmobbngrnlh7vkuovku7YqL1xyXG4gICAgYnVja2V0Q2xpbmsoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZWxmLm9uKExheWEuRXZlbnQuTU9VU0VfRE9XTiwgdGhpcywgdGhpcy5kb3duKTtcclxuICAgICAgICB0aGlzLnNlbGYub24oTGF5YS5FdmVudC5NT1VTRV9NT1ZFLCB0aGlzLCB0aGlzLm1vdmUpO1xyXG4gICAgICAgIHRoaXMuc2VsZi5vbihMYXlhLkV2ZW50Lk1PVVNFX1VQLCB0aGlzLCB0aGlzLnVwKTtcclxuICAgICAgICB0aGlzLnNlbGYub24oTGF5YS5FdmVudC5NT1VTRV9PVVQsIHRoaXMsIHRoaXMub3V0KTtcclxuICAgIH1cclxuICAgIC8qKuaMieS4iyznu5nkuojnm67moIfkvY3nva7vvIzns5bmnpzotbDlkJHnm67moIfkvY3nva47XHJcbiAgICAgKiDlubbkuJTliIbmlbDlop7liqAqL1xyXG4gICAgZG93bihldmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZi5zY2FsZSgwLjksIDAuOSk7XHJcbiAgICAgICAgLy8g5aaC5p6c5oSf5bqU5Yy65pyJ57OW5p6cLOaJvuWIsOesrOS4gOS4qui/m+WFpeaEn+W6lOWMuueahOezluaenOeahOWUr+S4gOWQjeensFxyXG4gICAgICAgIGlmICh0aGlzLm5hbWVBbmRJbmRleFswXSkge1xyXG4gICAgICAgICAgICBsZXQgY2FuZHlOYW1lID0gdGhpcy5uYW1lQW5kSW5kZXhbdGhpcy5uYW1lQW5kSW5kZXgubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGxldCBjYW5keSA9IHRoaXMuY2FuZHlQYXJlbnQuZ2V0Q2hpbGRCeU5hbWUoY2FuZHlOYW1lKTtcclxuICAgICAgICAgICAgbGV0IENhbmR5U2NyaXB0ID0gY2FuZHkuZ2V0Q29tcG9uZW50KENhbmR5KTtcclxuICAgICAgICAgICAgLy8g57uZ5LqI55uu5qCH5Zyw54K5LOmdnuepuuivtOaYjueCueWHu+i/h+S6hlxyXG4gICAgICAgICAgICBpZiAoQ2FuZHlTY3JpcHQudGFyZ2V0QnVja2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBDYW5keVNjcmlwdC50YXJnZXRCdWNrZXQgPSB0aGlzLnNlbGY7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn57OW5p6c5LiN5Zyo5oSf5bqU5Yy677yM5oiW6ICF54K56ZSZ5LqGJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoq56e75YqoKi9cclxuICAgIG1vdmUoZXZlbnQpOiB2b2lkIHtcclxuICAgIH1cclxuICAgIC8qKuaKrOi1tyovXHJcbiAgICB1cCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbGYuc2NhbGUoMSwgMSk7XHJcbiAgICB9XHJcbiAgICAvKirlh7rlsY/luZUqL1xyXG4gICAgb3V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZi5zY2FsZSgxLCAxKTtcclxuICAgIH1cclxuXHJcbiAgICBvbkRpc2FibGUoKTogdm9pZCB7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgTWFpblNjZW5lQ29udHJvbCBmcm9tIFwiLi9NYWluU2NlbmVDb250cm9sXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbmR5IGV4dGVuZHMgTGF5YS5TY3JpcHQge1xyXG4gICAgLyoq6Ieq5bexKi9cclxuICAgIHByaXZhdGUgc2VsZjogTGF5YS5TcHJpdGU7XHJcbiAgICAvKiroh6rlt7HouqvkuIrnmoTnorDmkp7moYYqL1xyXG4gICAgcHJpdmF0ZSByaWc6IExheWEuUmlnaWRCb2R5O1xyXG4gICAgLyoq5omA5bGe5Zy65pmvKi9cclxuICAgIHByaXZhdGUgc2VsZlNjZW5lOiBMYXlhLlNjZW5lO1xyXG4gICAgLyoq5Zyo54i26IqC54K55LiK6Z2i55qE57Si5byV5YC8Ki9cclxuICAgIHByaXZhdGUgc2VsZkluZGV4OiBudW1iZXI7XHJcbiAgICAvKirns5bmnpzliLDnorDliLDmhJ/lupToo4Xnva7ml7bvvIzlkI3lrZfoo4Xov5vov5nkuKrmlbDnu4QqL1xyXG4gICAgcHJpdmF0ZSBuYW1lQW5kSW5kZXg6IEFycmF5PHN0cmluZz47XHJcbiAgICAvKirlr7nlupTmobbnmoTnm67moIcqL1xyXG4gICAgcHJpdmF0ZSB0YXJnZXRCdWNrZXQ6IExheWEuU3ByaXRlO1xyXG4gICAgLyoq57OW5p6c6L+Q6KGM55qE6YCf5bqmKi9cclxuICAgIHByaXZhdGUgc3BlZWQ6IG51bWJlcjtcclxuICAgIC8qKuaYr+WQpuWPr+S7pemAieaLqeebruaghyovXHJcbiAgICBwcml2YXRlIHNlbGVjdFRhcmdldDogYm9vbGVhbjtcclxuICAgIC8qKuW+l+WIhuaYvuekuiovXHJcbiAgICBwdWJsaWMgc2NvcmVMYWJlbDogTGF5YS5MYWJlbDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgc3VwZXIoKTsgfVxyXG4gICAgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbml0UHJvcGVydHkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirliJ3lp4vljJYqL1xyXG4gICAgaW5pdFByb3BlcnR5KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VsZiA9IHRoaXMub3duZXIgYXMgTGF5YS5TcHJpdGU7XHJcbiAgICAgICAgdGhpcy5zZWxmU2NlbmUgPSB0aGlzLnNlbGYuc2NlbmUgYXMgTGF5YS5TY2VuZTtcclxuICAgICAgICBsZXQgbWFpblNjZW5lQ29udHJvbCA9IHRoaXMuc2VsZlNjZW5lLmdldENvbXBvbmVudChNYWluU2NlbmVDb250cm9sKTtcclxuICAgICAgICB0aGlzLm5hbWVBbmRJbmRleCA9IG1haW5TY2VuZUNvbnRyb2wubmFtZUFuZEluZGV4O1xyXG4gICAgICAgIHRoaXMuc2NvcmVMYWJlbCA9IG1haW5TY2VuZUNvbnRyb2wuc2NvcmVMYWJlbDtcclxuICAgICAgICB0aGlzLnRhcmdldEJ1Y2tldCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yaWcgPSB0aGlzLnNlbGYuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRCb2R5KSBhcyBMYXlhLlJpZ2lkQm9keTtcclxuICAgICAgICB0aGlzLnJpZy5saW5lYXJWZWxvY2l0eSA9IHsgeDogMCwgeTogMC4xIH07Ly/mraTlpIR55YC85b+F6aG75LiN562J5LqOMOaJjeiDveato+W4uOajgOa1i+eisOaSnu+8jOW5tuS4jeefpemBk+S4uuS9lVxyXG4gICAgICAgIHRoaXMuc3BlZWQgPSA2O1xyXG4gICAgICAgIHRoaXMuc2VsZWN0VGFyZ2V0ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBvblRyaWdnZXJFbnRlcihvdGhlcjogYW55LCBzZWxmOiBhbnksIGNvbnRhY3Q6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIGxldCBvdGhlck5hbWU6IHN0cmluZyA9IG90aGVyLm93bmVyLm5hbWU7XHJcbiAgICAgICAgLy8g5Yid5qyh56Kw5pKe5oqK5ZCN56ew5ZKM5ZSv5LiA55qE57Si5byV5YC85pS+6L+b5pWw57uEXHJcbiAgICAgICAgaWYgKG90aGVyTmFtZSA9PT0gJ2luZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgbGV0IG5hbWUgPSBzZWxmLm93bmVyLm5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZUFuZEluZGV4LnB1c2gobmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChvdGhlck5hbWUgPT09ICdyZWRCdWNrZXQnIHx8IG90aGVyTmFtZSA9PT0gJ3llbGxvd0J1Y2tldCcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxmLnJlbW92ZVNlbGYoKTtcclxuICAgICAgICAgICAgbGV0IGNvbG9yID0gc2VsZi5vd25lci5uYW1lLnN1YnN0cmluZygwLCAxMSk7XHJcbiAgICAgICAgICAgIC8vIOWQjeensOmFjeWvuVxyXG4gICAgICAgICAgICBsZXQgcGFpck5hbWUgPSBjb2xvciArIG90aGVyTmFtZTtcclxuICAgICAgICAgICAgbGV0IG1hdGNoaW5nXzAxID0gJ3llbGxvd0NhbmR5JyArICd5ZWxsb3dCdWNrZXQnO1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hpbmdfMDIgPSAncmVkQ2FuZHlfX18nICsgJ3JlZEJ1Y2tldCc7XHJcbiAgICAgICAgICAgIGlmIChwYWlyTmFtZSA9PT0gbWF0Y2hpbmdfMDEgfHwgcGFpck5hbWUgPT09IG1hdGNoaW5nXzAyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjb3JlTGFiZWwudGV4dCA9IChOdW1iZXIodGhpcy5zY29yZUxhYmVsLnRleHQpICsgMTAwKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uVHJpZ2dlclN0YXkob3RoZXI6IGFueSwgc2VsZjogYW55LCBjb250YWN0OiBhbnkpOiB2b2lkIHtcclxuICAgIH1cclxuXHJcbiAgICBvblRyaWdnZXJFeGl0KG90aGVyOiBhbnksIHNlbGY6IGFueSwgY29udGFjdDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IG90aGVyTmFtZSA9IG90aGVyLm93bmVyLm5hbWU7XHJcbiAgICAgICAgLy8g56Kw5pKe57uT5p2f5Yig5o6JXHJcbiAgICAgICAgaWYgKG90aGVyTmFtZSA9PT0gJ2luZHVjdGlvbicpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5hbWVBbmRJbmRleC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmFtZUFuZEluZGV4W2ldID09PSBzZWxmLm93bmVyLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWVBbmRJbmRleC5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g6LaF5Ye66IyD5Zu05raI5aSxXHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZi55ID4gTGF5YS5zdGFnZS5oZWlnaHQgKyAxMDAgfHwgdGhpcy5zZWxmLnggPiA3NTAgKyB0aGlzLnNlbGYud2lkdGggKyA1MCB8fCB0aGlzLnNlbGYueCA8IC10aGlzLnNlbGYud2lkdGgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxmLnJlbW92ZVNlbGYoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8g5Yik5pat5Y675ZCRXHJcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0QnVja2V0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZi55ICs9IHRoaXMuc3BlZWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8geCx55YiG5Yir55u45YeP5piv5Lik54K56L+e57q/5ZCR6YePXHJcbiAgICAgICAgICAgIGxldCBwb2ludCA9IG5ldyBMYXlhLlBvaW50KHRoaXMudGFyZ2V0QnVja2V0LnggLSB0aGlzLnNlbGYueCwgdGhpcy50YXJnZXRCdWNrZXQueSAtIHRoaXMuc2VsZi55KTtcclxuICAgICAgICAgICAgLy8g5b2S5LiA5YyW77yM5ZCR6YeP6ZW/5bqm5Li6MeOAglxyXG4gICAgICAgICAgICBwb2ludC5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgLy/lkJHph4/nm7jliqBcclxuICAgICAgICAgICAgdGhpcy5zZWxmLnggKz0gcG9pbnQueCAqIHRoaXMuc3BlZWQgKiAxNSAvIDg7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZi55ICs9IHBvaW50LnkgKiB0aGlzLnNwZWVkICogMTUgLyA4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcclxuICAgICAgICBMYXlhLlBvb2wucmVjb3ZlcihcImNhbmR5XCIsIHRoaXMuc2VsZik7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgQ2FuZHkgZnJvbSBcIi4vQ2FuZHlcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1haW5TY2VuZUNvbnRyb2wgZXh0ZW5kcyBMYXlhLlNjcmlwdCB7XHJcbiAgICAvKiogQHByb3Age25hbWU6YnVja2V0LCB0aXBzOlwi55uS5a2QXCIsIHR5cGU6UHJlZmFifSovXHJcbiAgICBwdWJsaWMgYnVja2V0OiBMYXlhLlByZWZhYjtcclxuICAgIC8qKiBAcHJvcCB7bmFtZTpidWNrZXRQYXJlbnQsIHRpcHM6XCLnm5LlrZDniLboioLngrlcIiwgdHlwZTpOb2RlfSovXHJcbiAgICBwdWJsaWMgYnVja2V0UGFyZW50OiBMYXlhLlNwcml0ZTtcclxuXHJcbiAgICAvKiogQHByb3Age25hbWU6Y2FuZHksIHRpcHM6XCLns5bmnpxcIiwgdHlwZTpQcmVmYWJ9Ki9cclxuICAgIHB1YmxpYyBjYW5keTogTGF5YS5QcmVmYWI7XHJcbiAgICAvKiogQHByb3Age25hbWU6Y2FuZHlQYXJlbnQsIHRpcHM6XCLns5bmnpzniLboioLngrlcIiwgdHlwZTpOb2RlfSovXHJcbiAgICBwdWJsaWMgY2FuZHlQYXJlbnQ6IExheWEuU3ByaXRlO1xyXG5cclxuICAgIC8qKiBAcHJvcCB7bmFtZTpiYWNrZ3JvdW5kLCB0aXBzOlwi6IOM5pmv5Zu+XCIsIHR5cGU6Tm9kZX0qL1xyXG4gICAgcHVibGljIGJhY2tncm91bmQ6IExheWEuU3ByaXRlO1xyXG4gICAgLyoqIEBwcm9wIHtuYW1lOmFzc2VtYmx5LCB0aXBzOua1geawtOe6vywgdHlwZTpOb2RlfSovXHJcbiAgICBwdWJsaWMgYXNzZW1ibHk6IExheWEuU3ByaXRlO1xyXG5cclxuICAgIC8qKiBAcHJvcCB7bmFtZTpzY29yZUxhYmVsLCB0aXBzOuKAmOW+l+WIhuKAmSwgdHlwZTpOb2RlfSovXHJcbiAgICBwdWJsaWMgc2NvcmVMYWJlbDogTGF5YS5MYWJlbDtcclxuXHJcbiAgICAvKirns5bmnpzkuqfnlJ/nmoTml7bpl7Tpl7TpmpQqL1xyXG4gICAgcHJpdmF0ZSBjYW5keV9pbnRlcnZhbDogbnVtYmVyO1xyXG4gICAgLyoq5b2T5YmN5pe26Ze06K6w5b2VKi9cclxuICAgIHByaXZhdGUgY3JlYXRUaW1lOiBudW1iZXI7XHJcbiAgICAvKirnlJ/kuqflvIDlhbMqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdE9uT2ZmOiBib29sZWFuO1xyXG4gICAgLyoq57OW5p6c5Yiw56Kw5Yiw5oSf5bqU6KOF572u5pe277yM5ZCN5a2X6KOF6L+b6L+Z5Liq5pWw57uEKi9cclxuICAgIHByaXZhdGUgbmFtZUFuZEluZGV4OiBBcnJheTxzdHJpbmc+O1xyXG4gICAgLyoq55Sf5oiQ57OW5p6c5Liq5pWw6K6h5pWw5ZmoKi9cclxuICAgIHByaXZhdGUgY2FuZHlDb3VudDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkgeyBzdXBlcigpOyB9XHJcblxyXG4gICAgb25FbmFibGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5pbml0U2VjbmUoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirlnLrmma/liJ3lp4vljJYqL1xyXG4gICAgaW5pdFNlY25lKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2FuZHlfaW50ZXJ2YWwgPSA1MDA7XHJcbiAgICAgICAgdGhpcy5jcmVhdFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRPbk9mZiA9IHRydWU7XHJcbiAgICAgICAgTGF5YS5Nb3VzZU1hbmFnZXIubXVsdGlUb3VjaEVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubmFtZUFuZEluZGV4ID0gW107XHJcbiAgICAgICAgdGhpcy5jYW5keUNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnNjb3JlTGFiZWwudGV4dCA9ICcwJztcclxuICAgICAgICB0aGlzLmJ1Y2tldEluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKirns5bmnpzmobbliJ3lp4vljJYs5LuW5Lus5L2N572u5LiN5LiA5qC377yM5bm25LiU5oiQ5a+55Ye6546wKi9cclxuICAgIGJ1Y2tldEluaXQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8g56ys5LiA5Liq5qG255qE5L2N572uXHJcbiAgICAgICAgbGV0IHhfMDE6IG51bWJlciA9IExheWEuc3RhZ2Uud2lkdGggKiAxIC8gNDtcclxuICAgICAgICBsZXQgeV8wMSA9IDgwMDtcclxuICAgICAgICBsZXQgaW1hZ2VVcmxfMDE6IHN0cmluZyA9ICdjYW5keS/nuqLoibLmobYucG5nJztcclxuICAgICAgICAvLyDnrKzkuozkuKrmobbnmoTkvY3nva5cclxuICAgICAgICBsZXQgeF8wMjogbnVtYmVyID0gTGF5YS5zdGFnZS53aWR0aCAqIDMgLyA0O1xyXG4gICAgICAgIGxldCB5XzAyID0gODAwO1xyXG4gICAgICAgIGxldCBpbWFnZVVybF8wMjogc3RyaW5nID0gJ2NhbmR5L+m7hOiJsuahti5wbmcnO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgYnVja2V0ID0gTGF5YS5Qb29sLmdldEl0ZW1CeUNyZWF0ZUZ1bignYnVja2V0JywgdGhpcy5idWNrZXQuY3JlYXRlLCB0aGlzLmJ1Y2tldCkgYXMgTGF5YS5TcHJpdGU7XHJcbiAgICAgICAgICAgIHRoaXMuYnVja2V0UGFyZW50LmFkZENoaWxkKGJ1Y2tldCk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGJ1Y2tldC5uYW1lID0gJ3JlZEJ1Y2tldCc7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0LnBvcyh4XzAxIC0gYnVja2V0LndpZHRoIC8gMiwgeV8wMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Y2tldC5nZXRDaGlsZEJ5TmFtZSgncGljJykgYXMgTGF5YS5TcHJpdGUpLmxvYWRJbWFnZShpbWFnZVVybF8wMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0Lm5hbWUgPSAneWVsbG93QnVja2V0JztcclxuICAgICAgICAgICAgICAgICAgICBidWNrZXQucG9zKHhfMDIgLSBidWNrZXQud2lkdGggLyAyLCB5XzAyKTtcclxuICAgICAgICAgICAgICAgICAgICAoYnVja2V0LmdldENoaWxkQnlOYW1lKCdwaWMnKSBhcyBMYXlhLlNwcml0ZSkubG9hZEltYWdlKGltYWdlVXJsXzAyKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKirkuqfnlJ/ns5bmnpwqL1xyXG4gICAgcHJvZHVjdGlvbkNhbmR5KCk6IHZvaWQge1xyXG4gICAgICAgIGxldCBjYW5keSA9IExheWEuUG9vbC5nZXRJdGVtQnlDcmVhdGVGdW4oJ2NhbmR5JywgdGhpcy5jYW5keS5jcmVhdGUsIHRoaXMuY2FuZHkpIGFzIExheWEuU3ByaXRlO1xyXG4gICAgICAgIHRoaXMuY2FuZHlDb3VudCsrO1xyXG5cclxuICAgICAgICAvLyDpmo/mnLrliJvlu7rkuIDnp43popzoibLns5bmnpxcclxuICAgICAgICAvLyDns5bmnpznmoTlkI3np7Dnu5PmnoTmmK8xMeS9jeWtl+espuS4suWKoOS4iue0ouW8leWAvO+8jOi/meagt+S9v+S7luS7rOeahOWQjeensOWUr+S4gFxyXG4gICAgICAgIGxldCByYW5kb21OdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTtcclxuICAgICAgICBsZXQgdXJsXzAxID0gJ2NhbmR5L+m7hOiJsuezluaenC5wbmcnO1xyXG4gICAgICAgIGxldCB1cmxfMDIgPSAnY2FuZHkv57qi6Imy57OW5p6cLnBuZyc7XHJcbiAgICAgICAgc3dpdGNoIChyYW5kb21OdW0pIHtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgY2FuZHkubmFtZSA9ICd5ZWxsb3dDYW5keScgKyB0aGlzLmNhbmR5Q291bnQ7XHJcbiAgICAgICAgICAgICAgICAoY2FuZHkuZ2V0Q2hpbGRCeU5hbWUoJ3BpYycpIGFzIExheWEuU3ByaXRlKS5sb2FkSW1hZ2UodXJsXzAxKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBjYW5keS5uYW1lID0gJ3JlZENhbmR5X19fJyArIHRoaXMuY2FuZHlDb3VudDtcclxuICAgICAgICAgICAgICAgIChjYW5keS5nZXRDaGlsZEJ5TmFtZSgncGljJykgYXMgTGF5YS5TcHJpdGUpLmxvYWRJbWFnZSh1cmxfMDIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FuZHkucG9zKExheWEuc3RhZ2Uud2lkdGggLyAyIC0gY2FuZHkud2lkdGggLyAyLCAtMTAwKTtcclxuICAgICAgICB0aGlzLmNhbmR5UGFyZW50LmFkZENoaWxkKGNhbmR5KTtcclxuICAgICAgICBjYW5keS5yb3RhdGlvbiA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgb25VcGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3JlYXRPbk9mZikge1xyXG4gICAgICAgICAgICBsZXQgbm93VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIGlmIChub3dUaW1lIC0gdGhpcy5jcmVhdFRpbWUgPiB0aGlzLmNhbmR5X2ludGVydmFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0VGltZSA9IG5vd1RpbWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3Rpb25DYW5keSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcclxuXHJcbiAgICB9XHJcbn0iXX0=
